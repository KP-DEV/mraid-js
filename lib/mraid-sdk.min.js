!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.MRAIDSDK=e()}}(function(){return function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return r(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,s,h,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[e],a(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(o(i))for(s=Array.prototype.slice.call(arguments,1),u=i.slice(),n=u.length,h=0;n>h;h++)u[h].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var i,n,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(i)){for(a=s;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(0>n)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],r(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,i){var n,r,s,o=function(e,t){return function(){return e.apply(t,arguments)}};n=e("events").EventEmitter,s="http://services.tvzavr.ru/generic/MRAID/mraid.min.js",r=function(){function e(t,i,r){this._sendMessage=o(this._sendMessage,this),this._initAdView=o(this._initAdView,this);var s,a;if(null==t||!t||"string"!=typeof t)throw new TypeError("Incorrect MRAID container ID");if(null==i||!i||"string"!=typeof i)throw new TypeError("Incorrect MRAID Ad Unit URL");s=r.defaultPosition,a=r.placementType,this.id=t,this.parent=null,this.creativeUrl=i,this._emitter=new n,this._state="loading",this._viewable=!1,this._placementType=a,this._maxSize={width:window.innerWidth,height:window.innerHeight},this._expandProperties=this._maxSize,this._defaultPosition=s,this._currentPosition=s,this._adView=e.createAdView(t),this._adView.addEventListener("load",this._initAdView),this._setToDefaultPosition()}return e.createAdView=function(e){var t;return t=document.createElement("iframe"),t.setAttribute("id",e),t.setAttribute("name",e),t.setAttribute("scrolling","no"),t.setAttribute("style","border: none; background-color: #000; position: fixed; top: 0; left: 0; z-index: 2147483646; display: none;"),t},e.prototype._initAdView=function(e){var t,i,n;return i=e.target.contentWindow,t=i.document,i.mraid={_sendMessage:this._sendMessage,placementType:this._placementType,defaultPosition:this._defaultPosition,maxSize:this._maxSize,getVersion:function(){return"2.0"},getState:function(){return"loading"},addEventListener:function(e,t){return"ready"===e?i.mraid._MRAIDReadyListener=t:void 0}},t.write("<style>html, body { margin: 0; padding: 0; }</style>"),n=new XMLHttpRequest,n.open("GET",this.creativeUrl,!0),n.onreadystatechange=function(){return 4===n.readyState&&200===n.status?(t.write('<script src="'+s+'"></script>'),t.write(n.response)):void 0},n.send(null)},e.prototype._sendMessage=function(e,t,i){switch(e){case"vpaidEvent":this._emitter.emit("vpaidEvent",t);break;case"open":this.open(t);break;case"state":switch(t){case"default":this._setToDefaultPosition();break;case"expanded":this._expand();break;case"hidden":this._close()}}return"function"==typeof t&&(i=t),i&&"function"==typeof i?i(this._currentPosition):void 0},e.prototype._setCurrentPosition=function(e){var t,i,n,r;return n=e.x,r=e.y,i=e.width,t=e.height,this._currentPosition={x:n,y:r,width:i,height:t},this._adView.style.top=r+"px",this._adView.style.left=n+"px",this._adView.style.width=i+"px",this._adView.style.height=t+"px"},e.prototype._setToDefaultPosition=function(){return this._setCurrentPosition(this._defaultPosition)},e.prototype._expand=function(){return this._setCurrentPosition({x:0,y:0,width:this._expandProperties.width,height:this._expandProperties.height})},e.prototype.expand=function(e){return this._adView.contentWindow.mraid.expand(e)},e.prototype.open=function(e){return this._emitter.emit("open",e)},e.prototype.close=function(){return this._adView.contentWindow.mraid.close()},e.prototype.resume=function(){return this._adView.contentWindow.mraid._setViewable(!0)},e.prototype.appendTo=function(e){return this.parent=e,e.appendChild(this._adView)},e.prototype.show=function(){var e;return this._adView.style.display="block",this._viewable=!0,e=this._adView.contentWindow.mraid,null!=e._setViewable?e._setViewable(!0):void 0},e.prototype.hide=function(){var e;return this._adView.style.display="none",this._viewable=!1,e=this._adView.contentWindow.mraid,null!=e._setViewable?e._setViewable(!1):void 0},e.prototype._close=function(){return this._adView.removeEventListener("load",this._initAdView),this.parent.removeChild(this._adView),delete this.parent,delete this._adView,this._emitter.emit("close",this.id)},e.prototype.on=function(e,t){return this._emitter.addListener(e,t)},e.prototype.off=function(e,t){return this._emitter.removeListener(e,t)},e}(),t.exports=r},{events:1}],3:[function(e,t,i){var n,r,s,o;r=e("./container.coffee"),o="2.0",n={x:0,y:0,width:1280,height:720},s=function(){function e(){}return e.containers={},e.getVersion=function(){return o},e.createContainer=function(e,t){var i,s;return s=function(e,t){return setTimeout(t,e)},this.containers[e]&&this.removeContainer(e),i=this.containers[e]=new r(e,t,{defaultPosition:n,placementType:"interstitial"}),i.on("close",function(e){return function(t){return s(100,function(){return e.removeContainer(t)})}}(this)),i.appendTo(document.body),s(100,function(e){return function(){return i._adView.focus()}}(this)),i.show(),i},e.removeContainer=function(e){return delete this.containers[e]},e}(),t.exports=s},{"./container.coffee":2}]},{},[3])(3)});
